<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Locking Down a Linux Server - The Entryways - hyp5r.io - The Personal Blog of William Quinn</title><meta name="description" content="So my main goal for this week was to lock down my Linux servers at home. For the moment, I run two: A Raspberry Pi 3 running Raspbian, and my Synology DS418play which runs DSM. I’ll try to go over security basics that can apply&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://hyp5r.io/locking-down-a-linux-server-the-entryways/"><link rel="alternate" type="application/atom+xml" href="https://hyp5r.io/feed.xml"><link rel="alternate" type="application/json" href="https://hyp5r.io/feed.json"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Cairo:400,700|Maitree:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Maitree',serif;--heading-font:'Cairo',sans-serif;--logo-font:'Cairo',sans-serif;--menu-font:'Cairo',sans-serif}</style><link rel="stylesheet" href="https://hyp5r.io/assets/css/style.css?v=dbb3afffac7ffc31440abda380631235"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://hyp5r.io/locking-down-a-linux-server-the-entryways/"},"headline":"Locking Down a Linux Server - The Entryways","datePublished":"2020-11-10T00:00","dateModified":"2021-07-18T13:21","description":"So my main goal for this week was to lock down my Linux servers at home. For the moment, I run two: A Raspberry Pi 3 running Raspbian, and my Synology DS418play which runs DSM. I’ll try to go over security basics that can apply&hellip;","author":{"@type":"Person","name":"William Quinn"},"publisher":{"@type":"Organization","name":"William Quinn"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://hyp5r.io/">hyp5r.io - The Personal Blog of William Quinn</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://hyp5r.io/" target="_self">Home</a></li><li class="has-submenu"><a href="https://hyp5r.io/tags/" target="_self" aria-haspopup="true">Categories</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://hyp5r.io/tags/technology/" target="_self">Technology</a></li><li><a href="https://hyp5r.io/tags/security/" target="_self">Security</a></li><li><a href="https://hyp5r.io/tags/rants/" target="_self">Rants</a></li></ul></li><li><a href="https://github.com/hyp5r" target="_blank">GitHub</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://hyp5r.io/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." aria-label="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://hyp5r.io/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://hyp5r.io/media/website/daniel-fazio-DzqeB43HfnE-unsplash.jpg" srcset="https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-xs.jpg 300w, https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-sm.jpg 480w, https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-md.jpg 768w, https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-lg.jpg 1024w, https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-xl.jpg 1360w, https://hyp5r.io/media/website/responsive/daniel-fazio-DzqeB43HfnE-unsplash-2xl.jpg 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2020-11-10T00:00">November 10, 2020</time></div><h1>Locking Down a Linux Server - The Entryways</h1></div></header></div><div class="wrapper post__entry"><p>So my main goal for this week was to lock down my Linux servers at home. For the moment, I run two: A Raspberry Pi 3 running Raspbian, and my Synology DS418play which runs DSM. I’ll try to go over security basics that can apply to a wide range of Linux servers, but the bulk of my experience is with Debian-based distros, so if you’re not running Ubuntu, Debian, Linux Mint, or any other Debian derivative, your mileage may vary. These can also apply to other operating systems like Windows and Mac, it just depends on what you do with them.</p><p>Depending on what all you run on your servers, you may have various entryways to get in, including a web-based authentication (common on NAS appliances), GUI (whether it be GNOME, KDE, Cinnamon, etc.), SSH, Telnet (please don’t use Telnet), and other items you may not be thinking. It’s wise to think of all the possible ways to access data and secure them.</p><h2 id="telnet">Telnet</h2><p>So I’ll start with Telnet, and this one’s simple: Do not use Telnet. Seriously, if you still rely on Telnet in 2019, something’s wrong. You should never use Telnet if at all possible. By default everything under it is plaintext, including authentication. Disable it when possible.</p><h2 id="ssh">SSH</h2><p>SSH is the preferred CLI method, so here’s a couple of pointers for securing your SSH environment.</p><ul><li><strong>Disable password-based authentication and switch to a key-based authentication.</strong> Is it annoying as hell sometimes? Yes. Does it really increase your security? Yes. If you’re securing systems that include a lot of data, this should be a standard.<ul><li>To accomplish this, edit the <code>/etc/ssh/sshd_config</code> file on your installation and set <code>PasswordAuthentication no</code>. You’ll also need to add your public key to <code>~/.ssh/authorized_keys</code>, otherwise you’ll lock yourself out of SSH! Once all of that is set, a restart of your machine or a restart of the ssh daemon is needed (<code>systemctl restart sshd</code>).</li></ul></li><li><strong>Disable the root account and do not use it.</strong> It’s another one of those annoying things, but it’s much safer to add your account as a sudoer and sudo your commands. This also prevents you from being an idiot and accidentally running <code>rm -rf /</code> on your machine. At least then you’ll have to actually type in <code>sudo rm -rf /</code> for that to work. Also, don’t do that.<ul><li>A quick-and-easy command to disable the root account would be <code>passwd -l root</code>. This will prevent the root account from being able to log in.</li></ul></li><li><strong>Change the default port of SSH.</strong> Yes, this is more of security-through-obscurity than anything else, but you’d be surprised how many common port scanners will check that port 22 to see if anything happens to run on it. Why not run your SSH on port 23, or port 21, or any other port? You do have 65535 options to choose from, might as well choose your favorite number… unless it’s 22.<ul><li>To change this, you’ll be back in the <code>/etc/ssh/sshd_config</code> file on your system. Find the line that states <code># Port 22</code>, remove the #, and change the number to what you’d like it to be. Restart your ssh daemon and you’ll be good to go.</li></ul></li></ul><h2 id="gui">GUI</h2><p>So GUI methods sound a little weird, but this includes any way you see a system with more than just text. This can include accessing it through your favorite X server, through a web interface, and other means. Here’s some things to take a look at to help secure this side of your systems.</p><ul><li><strong>Enable two-factor authentication.</strong> This is by far the most common thing you can do to help secure these areas. Whether you use an app on your phone that supports TOTP codes, a hardware token like a Yubikey, or you print out a giant list of one-time-use codes (don’t do that), these methods add the extra step of “what you have” to your “what you know”.<ul><li>Need some recommended apps to hold those TOTP keys? I personally use Authy as it syncs with my phone number. Want something that doesn’t sync and always stays local? Take your pick of Google Authenticator, Microsoft Authenticator, or go the open source route with FreeOTP.</li></ul></li><li><strong>Change the default port of your administration console.</strong> It’s another one of those security-through-obscurity things, but if you run a web interface admin console, it’d be a good idea to change the port from the default setting, as the default settings are likely a quick search away from being found.<ul><li>A good example of this is setting up my Synology server, default ports for admin are 5000 and 5001 (HTTP and HTTPS, respectively). Did I change those? You’re damn right I did.</li></ul></li></ul><h2 id="other-quick-things-to-note">Other Quick Things to Note</h2><p>So these are just a few things to think about when securing the so-called entryways to your systems, but here’s a couple of other general items to keep in mind.</p><ul><li>Never expose your SSH port to the Internet. Seriously. If you want to see what it’s like to be port-scanned and potentially DDoS’d, then by all means, but this is a practice that is never recommended.</li><li>Never expose your admin console to the Internet. This is deja vu, really. Insert what I said above here.</li></ul><h2 id="conclusion">Conclusion</h2><p>So this is just a first port in securing your Linux systems. Later on I may decide to publish more advanced things to think about when securing these systems, as there are many things to think of when making sure your data stays where you want it.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on July 18, 2021</p><ul class="post__tag"><li><a href="https://hyp5r.io/tags/linux/">linux</a></li><li><a href="https://hyp5r.io/tags/security/">security</a></li><li><a href="https://hyp5r.io/tags/technology/">technology</a></li></ul><div class="post__share"></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://hyp5r.io/authors/william-quinn/" class="invert" rel="author">William Quinn</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://hyp5r.io/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://hyp5r.io/adding-separator-spaces-to-the-dock-in-mac-os-x/" class="invert post__nav-link" rel="prev"><span>Previous</span> Adding Separator Spaces to the Dock in Mac OS X</a></div><div class="post__nav-next"><a href="https://hyp5r.io/adding-separator-spaces-to-the-dock-in-mac-os-x/" class="invert post__nav-link" rel="next"><span>Next</span> Adding Separator Spaces to the Dock in Mac OS X </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://hyp5r.io/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p class="align-center">Opinions are my own and do not represent any other individual or company.<br>Just about every header picture on here is from <a href="https://unsplash.com/" target="_blank" rel="noopener">Unsplash</a>.</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://hyp5r.io/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'overlay',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://hyp5r.io/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>